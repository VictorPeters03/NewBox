import spotipy
from .secrets import SPOTIFY_REDIRECT_URI, USER, SCOPES, SPOTIFY_CLIENT_ID, SPOTIFY_CLIENT_SECRET
from spotipy.oauth2 import SpotifyOAuth

spAuth = spotipy.oauth2.SpotifyOAuth(client_id=SPOTIFY_CLIENT_ID, client_secret=SPOTIFY_CLIENT_SECRET,
                                     redirect_uri=SPOTIFY_REDIRECT_URI, scope=SCOPES)

# authCode = spAuth.parse_response_code(
#     url='http://localhost:8080/?code=AQBGLkkQeFBHJJGvgX1wu0rS0xXvxVa6kvFHlOJ6Ot00nIqg427js3Vmo0H6UWVJBlDuU0AZV4n0Q5w_ABAzRidI1xmtHWoR5xkXCfKGS70TTUm_7vim3njCknbN-yPA6ar4Fp8CxSjit4ALIkHeMCPDd0mfIIfIfV-pbxdZSTZWfr2FMXsaqKLc3F-3TsjrzX-ipQPFs28F5GDB_mXpGLDhuRa-OoymETTy-AtNzVY2kGz5fRiC0rnfdkEMuVUOnJDD9Rq4yWdwmZ_UwEcBVdiPipK2kJPcX9lMmbuo3uivBCCxToAQzUnJ99VGGPrVAHR4ECMXlrxF0V3zCdDBgFS-wOB68RtGw9dJUg10JjjlHRJfL4XtYxX7RHYt_qrgbHPQ2YNFEZRJ-Tdh_246v8j1fEjjlT7vc1Ehg4K7P8GOiiHBEzv9LBEn8-dwIIr1n1ITApED9DJ2nRUfQPNYofjXFiQnzyHBPD0XEDe9XX8SS4tUFxMZIVW25X0D04tf_2lJmkuqRTtrYgIMjjXLv9vA48lEu9ZvdaR2V_vNtgmhsG4bZFcY2GG4RE7Yydyv9JSRp3aWoo7Pk3tbqTZLa1vF3Efa1Kbx77ifjSDAtwU57JMbS5btqhMshRGWgvbz_s4gjMpuz5sryhllIU7E-dKfr8f8T_kmhG_QeAmHOgQVEmXqqqVeNGo'
# )

authCode = spAuth.parse_response_code(url='http://localhost:8080/?code=AQDgQp6viy8xcG9zPTtH0wHchH2scYQmesH35floL2ddMvXKLp-A7JhwxPw6J2mI0yua_jcIIENqFOQ_cjhi4x3D3pyGLp_t1LgGMJoVD7tf61v5RObG2xiuZJLUzGOpB-IRpIPjC1Dcu-pprTeXJxtXQ6Ah054pqKZ2UsmLLdDjOGMXZ0DrsuUIjoiHX-RXWfvvLS1hljjdyXrWV2wk4thw2-etd8OMvQZGAGfj1VJiaG1pUEYS6bTjpDsrGxdJfTuxDCkmBup-qZc8pdff5Um6ouBP2zY7HLIuLDGnpcHY9t9owBGykebJlo7Df1Xx4M-qU71gLdFbPosJSywpaUdpv5SizkM5NZDp8mtzcoYOs-qqr6b8b9g6R6x05sqK53CVwbeYQ6CCRRQJsebgq6cUET1YQrVT3q9lHgErNiorUCF7u32r-HQ9FEK0rZBlz9_73z9y4kTCsX9SiNpduzahDO9dRAfrh3SSpt5EbIVyzx_5bPetBJSiFadYRgzQHo5ls987sb_THwNyWuDwKwSr9CpQXCF3jIDpl2IIK9OKpAOMMQ-c0QnlwJwITnL8OKiYNFvaX1Z39orYfC0mXY37C9NscKSf_lIWXH1ygn3iB1OzGDnPEgdWV0bkqX0hGWc6-bYr0_SG7jCigGlfg8cfw1Ff-4psiv3rTTbghEkToaos_O-uq9s')


if spAuth.get_cached_token()['access_token'] is None:
    accessData = spAuth.get_access_token(code=authCode, as_dict=True)

token = spAuth.get_cached_token()['access_token']
refreshToken = spAuth.get_cached_token()['refresh_token']
# spAuth.refresh_access_token(refreshToken)

spotifyHandler = spotipy.Spotify(token)

